"use strict";(self["webpackChunkalpha_shop_vue2"]=self["webpackChunkalpha_shop_vue2"]||[]).push([[186],{5186:function(t,e,a){a.r(e),a.d(e,{default:function(){return z}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-wrapper container"},[a("h3",{staticClass:"main-title"},[t._v("結帳")]),a("form",{staticClass:"form",attrs:{action:"",novalidate:"true"},on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[a("StepperPanel",{attrs:{"current-step":t.currentStep,sections:t.sections}}),a("div",{staticClass:"form-panel"},[a("h3",{staticClass:"form-panel__title"},[t._v(" "+t._s(t.sections[t.currentStep].sectionName)+" ")]),a("div",{staticClass:"form-panel__content"},[0===t.currentStep?a("FormSectionAddress",{attrs:{"section-data":t.sections[0]},on:{"update-data":t.updateData}}):t._e(),1===t.currentStep?a("FormSectionShipping",{attrs:{"section-data":t.sections[1]},on:{"update-data":t.updateData}}):t._e(),2===t.currentStep?a("FormSectionPayment",{attrs:{"section-data":t.sections[2]},on:{"update-data":t.updateData}}):t._e()],1)]),a("ControlPanel",{attrs:{"current-step":t.currentStep,sections:t.sections},on:{"previous-step":function(e){t.currentStep--},"next-step":t.nextStep}}),a("CartPanel",{attrs:{"cart-products":t.cart.products,shipping:t.sections[1].shipping},on:{"product-change":t.handleProductChange}})],1),t.cacheProduct?a("div",{staticClass:"modal-overlay",on:{click:function(e){t.cacheProduct=""}}}):t._e(),t.cacheProduct?a("div",{staticClass:"modal-window"},[a("div",{staticClass:"modal-window__exit",on:{click:function(e){t.cacheProduct=""}}}),a("p",{staticClass:"modal-window__text"},[t._v("確定要移除商品嗎？")]),a("div",{staticClass:"modal-window__buttons"},[a("button",{staticClass:"modal-window__button modal-window__button--yes",on:{click:function(e){return t.handleProductChange(t.cacheProduct,-1,!0)}}},[t._v(" 是 ")]),a("button",{staticClass:"modal-window__button modal-window__button--no",on:{click:function(e){t.cacheProduct=""}}},[t._v(" 否 ")])])]):t._e()])},n=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"stepper-panel"},t._l(t.sections,(function(e,i){return a("div",{key:i,class:["stepper-panel__step",{active:t.currentStep===i},{checked:t.currentStep>i}]},[a("div",{staticClass:"stepper-panel__circle"}),a("div",{staticClass:"stepper-panel__label"},[t._v(t._s(e.sectionName))])])})),0)},s=[],l={props:{currentStep:{type:Number,required:!0},sections:{type:Array,required:!0}}},o=l,c=a(1001),p=(0,c.Z)(o,r,s,!1,null,null,null),u=p.exports,d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"control-panel"},[t.currentStep>0?a("button",{staticClass:"control-panel__button control-panel__button--previous",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.previousStep.apply(null,arguments)}}},[t._v(" ← 上一步 ")]):t._e(),t.currentStep<t.sections.length-1?a("button",{staticClass:"control-panel__button control-panel__button--next",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.nextStep.apply(null,arguments)}}},[t._v(" 下一步 → ")]):t._e(),t.currentStep===t.sections.length-1?a("button",{staticClass:"control-panel__button control-panel__button--next",attrs:{type:"submit"}},[t._v(" 確認下單 ")]):t._e()])},m=[],_={props:{currentStep:{type:Number,required:!0},sections:{type:Array,required:!0}},methods:{previousStep:function(){this.$emit("previous-step")},nextStep:function(){this.$emit("next-step")}}},v=_,h=(0,c.Z)(v,d,m,!1,null,null,null),f=h.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cart-panel"},[a("h3",{staticClass:"cart-panel__title"},[t._v("購物籃")]),a("div",{staticClass:"cart-products"},[t._l(t.cartProducts,(function(e){return a("div",{key:e.id,staticClass:"cart-product"},[a("div",{staticClass:"cart-product__image",style:{"--imageUrl":"url("+e.imageUrl+")"}}),a("div",{staticClass:"cart-product__name"},[t._v(t._s(e.name))]),a("div",{staticClass:"cart-product__num"},[a("div",{staticClass:"cart-product__button cart-product__button--minus",on:{click:function(a){return t.$emit("product-change",e,-1)}}}),a("div",{staticClass:"cart-product__num--text"},[t._v(t._s(e.num))]),a("div",{staticClass:"cart-product__button cart-product__button--plus",on:{click:function(a){return t.$emit("product-change",e,1)}}})]),a("div",{staticClass:"cart-product__price"},[t._v(" "+t._s(t._f("priceDollarSign")(e.price))+" ")])])})),a("div",{staticClass:"shipping-price"},[a("div",{staticClass:"shipping-price__title"},[t._v("運費")]),a("div",{staticClass:"shipping-price__price"},[t._v(" "+t._s(t._f("priceDollarSign")(t.shipping.price))+" ")])]),a("div",{staticClass:"total-price"},[a("div",{staticClass:"total-price__title"},[t._v("小計")]),a("div",{staticClass:"total-price__price"},[t._v(t._s(t._f("priceDollarSign")(t.cartTotal)))])])],2)])},C=[],g={props:{cartProducts:{type:Array,required:!0},shipping:{type:Object,required:!0}},computed:{cartTotal(){let t=0;return this.cartProducts.forEach((e=>{t+=e.num*e.price})),t+=this.shipping.price,t}},filters:{priceDollarSign:function(t){return 0===t?"免費":"$ "+t}}},D=g,y=(0,c.Z)(D,b,C,!1,null,null,null),x=y.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"form-panel__section form-panel__section--address"},[a("div",{staticClass:"form-panel__input-block form-panel__input-block--title"},[a("label",{staticClass:"form-panel__label",attrs:{for:"title"}},[t._v("稱謂")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.title.value,expression:"title.value"}],staticClass:"form-panel__input form-panel__input--select",attrs:{name:"title",id:"title",required:""},on:{blur:function(e){t.checkValidity(e,t.title),t.updateDataToParent("title",t.title.value)},change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.title,"value",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",selected:"",disabled:""}},[t._v("請選擇稱謂")]),a("option",{attrs:{value:"male"}},[t._v("先生")]),a("option",{attrs:{value:"female"}},[t._v("小姐")]),a("option",{attrs:{value:"other"}},[t._v("其他")])])]),a("div",{staticClass:"form-panel__input-block form-panel__input-block--name"},[a("label",{staticClass:"form-panel__label",attrs:{for:"name"}},[t._v("姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name.value,expression:"name.value"}],staticClass:"form-panel__input form-panel__input--text",attrs:{type:"text",id:"name",placeholder:"請輸入姓名",required:""},domProps:{value:t.name.value},on:{blur:function(e){t.checkValidity(e,t.name),t.updateDataToParent("name",t.name.value)},input:function(e){e.target.composing||t.$set(t.name,"value",e.target.value)}}})]),a("div",{staticClass:"form-panel__input-block form-panel__input-block--phone"},[a("label",{staticClass:"form-panel__label",attrs:{for:"phone"}},[t._v("電話")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.phone.value,expression:"phone.value"}],staticClass:"form-panel__input form-panel__input--text",attrs:{type:"text",id:"phone",placeholder:"請輸入行動電話",required:""},domProps:{value:t.phone.value},on:{blur:function(e){t.checkValidity(e,t.phone),t.updateDataToParent("phone",t.phone.value)},input:function(e){e.target.composing||t.$set(t.phone,"value",e.target.value)}}})]),a("div",{staticClass:"form-panel__input-block form-panel__input-block--email"},[a("label",{staticClass:"form-panel__label",attrs:{for:"email"}},[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email.value,expression:"email.value"}],staticClass:"form-panel__input form-panel__input--text",attrs:{type:"email",id:"email",placeholder:"請輸入電子郵件",required:""},domProps:{value:t.email.value},on:{blur:function(e){t.checkValidity(e,t.email),t.updateDataToParent("email",t.email.value)},input:function(e){e.target.composing||t.$set(t.email,"value",e.target.value)}}})]),a("div",{staticClass:"form-panel__input-block form-panel__input-block--city"},[a("label",{staticClass:"form-panel__label",attrs:{for:"city"}},[t._v("縣市")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.city.value,expression:"city.value"}],staticClass:"form-panel__input form-panel__input--select",attrs:{name:"city",id:"title",required:""},on:{blur:function(e){t.checkValidity(e,t.city),t.updateDataToParent("city",t.city.value)},change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.city,"value",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",selected:"",disabled:""}},[t._v("請選擇縣市")]),t._l(t.cityOptions,(function(e){return a("option",{key:e,attrs:{value:"city"}},[t._v(" "+t._s(e)+" ")])}))],2)]),a("div",{staticClass:"form-panel__input-block form-panel__input-block--address"},[a("label",{staticClass:"form-panel__label",attrs:{for:"address"}},[t._v("地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.address.value,expression:"address.value"}],staticClass:"form-panel__input form-panel__input--text",attrs:{type:"text",id:"address",placeholder:"請輸入地址",required:""},domProps:{value:t.address.value},on:{blur:function(e){t.checkValidity(e,t.address),t.updateDataToParent("address",t.address.value)},input:function(e){e.target.composing||t.$set(t.address,"value",e.target.value)}}})])])},P=[],N=JSON.parse('{"a":{"Cities":["臺北市","基隆市","新北市","連江縣","宜蘭縣","新竹市","新竹縣","桃園市","苗栗縣","臺中市","彰化縣","南投縣","嘉義市","嘉義縣","雲林縣","臺南市","高雄市","澎湖縣","金門縣","屏東縣","臺東縣","花蓮縣"]}}');const{Cities:S}=N.a;var w={props:{sectionData:{type:Object,required:!0}},data(){return{cityOptions:S,title:{value:"",isDone:this.sectionData.isAllDone},name:{value:"",isDone:this.sectionData.isAllDone},phone:{value:"",isDone:this.sectionData.isAllDone},email:{value:"",isDone:this.sectionData.isAllDone},city:{value:"",isDone:this.sectionData.isAllDone},address:{value:"",isDone:this.sectionData.isAllDone}}},created(){const{title:t,name:e,phone:a,email:i,city:n,address:r}=this.sectionData;this.title.value=t,this.name.value=e,this.phone.value=a,this.email.value=i,this.city.value=n,this.address.value=r},methods:{updateDataToParent:function(t,e){const a=this.title.isDone&&this.name.isDone&&this.phone.isDone&&this.email.isDone&&this.city.isDone&&this.address.isDone;this.$emit("update-data",0,t,e,a)},checkValidity:function(t,e){if(!t.target.checkValidity())return t.target.classList.add("warning"),void(e.isDone=!1);t.target.classList.remove("warning"),e.isDone=!0}}},$=w,A=(0,c.Z)($,k,P,!1,null,null,null),E=A.exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"form-panel__section form-panel__section--shipping"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.shipping.name,expression:"shipping.name"}],staticClass:"form-panel__input form-panel__input--shipping",attrs:{type:"radio",name:"shipping",id:"normal-shipping",value:"normal",checked:""},domProps:{checked:t._q(t.shipping.name,"normal")},on:{change:[function(e){return t.$set(t.shipping,"name","normal")},function(e){t.shipping.price=0,t.updateDataToParent("shipping",t.shipping)}]}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.shipping.name,expression:"shipping.name"}],staticClass:"form-panel__input form-panel__input--shipping",attrs:{type:"radio",name:"shipping",id:"dhl-shipping",value:"dhl"},domProps:{checked:t._q(t.shipping.name,"dhl")},on:{change:[function(e){return t.$set(t.shipping,"name","dhl")},function(e){t.shipping.price=500,t.updateDataToParent("shipping",t.shipping)}]}}),a("label",{staticClass:"form-panel__label form-panel__label--radio",attrs:{for:"normal-shipping",value:"normal"}},[a("div",{staticClass:"form-panel__input-block form-panel__input-block--shipping"},[a("div",{staticClass:"form-panel__radio-label--button"}),a("div",{staticClass:"form-panel__radio-label--name"},[t._v("標準運送")]),a("div",{staticClass:"form-panel__radio-label--time"},[t._v("約 3~7 個工作天")]),a("div",{staticClass:"form-panel__radio-label--price"},[t._v(" "+t._s(t._f("priceDollarSign")(0))+" ")])])]),a("label",{staticClass:"form-panel__label form-panel__label--radio",attrs:{for:"dhl-shipping",value:"dhl"}},[a("div",{staticClass:"form-panel__input-block form-panel__input-block--shipping"},[a("div",{staticClass:"form-panel__radio-label--button"}),a("div",{staticClass:"form-panel__radio-label form-panel__radio-label--name"},[t._v(" DHL 貨運 ")]),a("div",{staticClass:"form-panel__radio-label form-panel__radio-label--time"},[t._v(" 48 小時內送達 ")]),a("div",{staticClass:"form-panel__radio-label form-panel__radio-label--price"},[t._v(" "+t._s(t._f("priceDollarSign")(500))+" ")])])])])},T=[],V={props:{sectionData:{type:Object,required:!0}},data(){return{shipping:{name:"normal",price:0}}},created(){const{shipping:t}=this.sectionData;this.shipping=t},methods:{updateDataToParent:function(t,e){this.$emit("update-data",1,t,e)}},filters:{priceDollarSign:function(t){return 0===t?"免費":"$"+t}}},j=V,O=(0,c.Z)(j,q,T,!1,null,null,null),Z=O.exports,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"form-panel__section form-panel__section--payment"},[a("div",{staticClass:"form-panel__input-block form-panel__input-block--card-name"},[a("label",{staticClass:"form-panel__label",attrs:{for:"card-name"}},[t._v("持卡人姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cardName.value,expression:"cardName.value"}],staticClass:"form-panel__input form-panel__input form-panel__input--text",attrs:{type:"text",id:"card-name",placeholder:"John Doe",required:""},domProps:{value:t.cardName.value},on:{blur:function(e){t.checkValidity(e,t.cardName),t.updateDataToParent("cardName",t.cardName.value)},input:function(e){e.target.composing||t.$set(t.cardName,"value",e.target.value)}}})]),a("div",{staticClass:"form-panel__input-block form-panel__input-block--card-number"},[a("label",{staticClass:"form-panel__label",attrs:{for:"card-number"}},[t._v("卡號")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cardNumber.value,expression:"cardNumber.value"}],staticClass:"form-panel__input form-panel__input--text",attrs:{type:"text",id:"card-number",placeholder:"1111 2222 3333 4444",required:""},domProps:{value:t.cardNumber.value},on:{blur:function(e){t.checkValidity(e,t.cardNumber),t.updateDataToParent("cardNumber",t.cardNumber.value)},input:function(e){e.target.composing||t.$set(t.cardNumber,"value",e.target.value)}}})]),a("div",{staticClass:"form-panel__input-block form-panel__input-block--card-expired"},[a("label",{staticClass:"form-panel__label",attrs:{for:"card-expired"}},[t._v("有效期限")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cardExpired.value,expression:"cardExpired.value"}],staticClass:"form-panel__input form-panel__input--text",attrs:{type:"text",id:"card-expired",placeholder:"MM/YY",required:""},domProps:{value:t.cardExpired.value},on:{blur:function(e){t.checkValidity(e,t.cardExpired),t.updateDataToParent("cardExpired",t.cardExpired.value)},input:function(e){e.target.composing||t.$set(t.cardExpired,"value",e.target.value)}}})]),a("div",{staticClass:"form-panel__input-block form-panel__input-block--card-cvc"},[a("label",{staticClass:"form-panel__label",attrs:{for:"card-cvc"}},[t._v("CVC / CCV ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cardCvc.value,expression:"cardCvc.value"}],staticClass:"form-panel__input form-panel__input--text",attrs:{type:"text",id:"card-cvc",placeholder:"123",required:""},domProps:{value:t.cardCvc.value},on:{blur:function(e){t.checkValidity(e,t.cardCvc),t.updateDataToParent("cardCvc",t.cardCvc.value)},input:function(e){e.target.composing||t.$set(t.cardCvc,"value",e.target.value)}}})])])},L=[],M={props:{sectionData:{type:Object,required:!0}},data(){return{cardName:{value:"",isDone:this.sectionData.isAllDone},cardNumber:{value:"",isDone:this.sectionData.isAllDone},cardExpired:{value:"",isDone:this.sectionData.isAllDone},cardCvc:{value:"",isDone:this.sectionData.isAllDone}}},created(){const{cardName:t,cardNumber:e,cardExpired:a,cardCvc:i}=this.sectionData;this.cardName.value=t,this.cardNumber.value=e,this.cardExpired.value=a,this.cardCvc.value=i},methods:{updateDataToParent:function(t,e){const a=this.cardName.isDone&&this.cardNumber.isDone&&this.cardExpired.isDone&&this.cardCvc.isDone;this.$emit("update-data",2,t,e,a)},checkValidity:function(t,e){if(!t.target.checkValidity())return t.target.classList.add("warning"),void(e.isDone=!1);t.target.classList.remove("warning"),e.isDone=!0}}},H=M,U=(0,c.Z)(H,F,L,!1,null,null,null),Y=U.exports;const B={cartProducts:[{id:"1",name:"破壞補丁修身牛仔褲",imageUrl:"https://c0.wallpaperflare.com/preview/711/684/890/jean-style-ripped-leg.jpg",price:3999,num:1},{id:"2",name:"刷色直筒牛仔褲",imageUrl:"https://images.unsplash.com/photo-1555689502-c4b22d76c56f?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=387&q=80",price:1299,num:1}]};var G={name:"Checkout",components:{StepperPanel:u,FormSectionAddress:E,FormSectionShipping:Z,FormSectionPayment:Y,ControlPanel:f,CartPanel:x},data(){return{cacheProduct:"",currentStep:0,sections:[{sectionName:"寄送地址",title:"",name:"",phone:"",email:"",city:"",address:"",isAllDone:!1},{sectionName:"運送方式",shipping:{name:"normal",price:0},isAllDone:!0},{sectionName:"付款資訊",cardName:"",cardNumber:"",cardExpired:"",cardCvc:"",isAllDone:!1}],cart:{products:[]}}},methods:{fetchCart:function(){const t=[...B.cartProducts];this.cart.products=[...t]},updateData:function(t,e,a,i){this.sections[t][e]=a,this.sections[t].isAllDone=i},handleProductChange:function(t,e,a=!1){if(a)return this.cart.products=this.cart.products.filter((e=>e.id!==t.id)),void(this.cacheProduct="");1!==t.num||-1!==e||a?t.num+=e:this.cacheProduct=t},nextStep:function(){this.sections[this.currentStep].isAllDone?this.currentStep++:alert("請完成表格填寫")},handleSubmit:function(t){if(t.preventDefault(),!this.sections[2].isAllDone)return void alert("請完成表格填寫");const{title:e,name:a,phone:i,email:n,city:r,address:s,shipping:l,cardName:o,cardNumber:c,cardExpired:p,cardCvc:u,products:d}={...this.sections[0],...this.sections[1],...this.sections[2],...this.cart};console.log({title:e,name:a,phone:i,email:n,city:r,address:s,shipping:l,cardName:o,cardNumber:c,cardExpired:p,cardCvc:u,products:d})}},created(){this.fetchCart()}},J=G,W=(0,c.Z)(J,i,n,!1,null,null,null),z=W.exports}}]);
//# sourceMappingURL=186.c961002d.js.map